#include "soc_AM335x.h"
#include "beaglebone.h"
#include "hw_types.h"
#include "pruss.h"
#include "gpio_v2.h"

#include "image.h"

#define BANK_ADDRESS_FOR_LED_GPIOS		(SOC_GPIO_1_REGS)
#define PIN_NUMBER_FOR_LED_3        	(24)

int main()
{
	imageData = (unsigned int *)(&(PRUInterop1Data->imageData));
	imageReadyFlag = &(PRUInterop1Data->imageReadyFlag);
	*imageReadyFlag = IMAGE_NOT_READY;
    while(1)
    {
    	while(*imageReadyFlag == IMAGE_READY);
    	GET_IMAGE;
    	*imageReadyFlag = IMAGE_READY;
    	HWREG(BANK_ADDRESS_FOR_LED_GPIOS + GPIO_DATAOUT) ^= (1 << PIN_NUMBER_FOR_LED_3);
    }
}
