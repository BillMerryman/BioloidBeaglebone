#include "soc_AM335x.h"
#include "beaglebone.h"
#include "hw_types.h"
#include "pruss.h"
#include "gpio_v2.h"

#include "image.h"

#define BANK_ADDRESS_FOR_LED_GPIOS		(SOC_GPIO_1_REGS)
#define PIN_NUMBER_FOR_LED_3        	(24)

#pragma NOINIT(PRUInterop1Data);
PRU_INTEROP_1_DATA *PRUInterop1Data; //make noinit

int main()
{

    while(1)
    {
    	while(imageIsReady());
    	GET_IMAGE;
    	imageReady();
    	HWREG(BANK_ADDRESS_FOR_LED_GPIOS + GPIO_DATAOUT) ^= (1 << PIN_NUMBER_FOR_LED_3);
    }
}
